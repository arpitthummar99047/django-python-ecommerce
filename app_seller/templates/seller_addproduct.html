<!-- seller_addproduct.html -->
{% extends "seller_base.html" %} {% block content %} {% load static %}
<main>
  <div class="aside-header d-flex align-items-center">
    <h3 class="text-uppercase fs-3 mb-0 text1">Add products</h3>
  </div>
  <div>
    <h6 class="red">{{msg}}</h6>
  </div>
  <form
    action="{% url 'seller_addproduct'%}"
    method="POST"
    class="needs-validation"
    novalidate
    enctype="multipart/form-data"
  >
    <div class="profile1">
      <div class="col-lg-9">
        <div class="page-content my-account__edit">
          <div class="d-flex align-items-center">
            <h3 class="text-uppercase text1 editprofile">add product</h3>
          </div>
          <div class="my-account__edit-form">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-12">
                <div class="form-floating my-3">
                  <!-- Add New Category Input -->
                  <div id="newCategoryContainer" style="display: none">
                    <label for="newCategoryName">New Category Name:</label>
                    <input
                      type="text"
                      id="newCategoryName"
                      name="new_category_name"
                      required
                    />
                    <!-- You can add more fields for new category description, etc. if needed -->
                  </div>

                  <!-- Category Dropdown -->
                  <select
                    class="form-control"
                    id="product_category"
                    name="category"
                    required
                  >
                    {% for category in categories %}
                    <option value="{{ category.id }}">
                      {{ category.cname }}
                    </option>
                    {% endfor %}
                    <!-- Add default categories -->
                    {% for default_category in default_categories %}
                    <option value="{{ default_category.id }}">
                      {{ default_category.cname }}
                    </option>
                    {% endfor %}
                    <option value="0">Add New Category</option>
                  </select>

                  <script>
                    // JavaScript to show/hide the new category input based on user selection
                    const categoryDropdown =
                      document.getElementById("product_category");
                    const newCategoryContainer = document.getElementById(
                      "newCategoryContainer"
                    );

                    categoryDropdown.addEventListener("change", function () {
                      if (categoryDropdown.value === "0") {
                        newCategoryContainer.style.display = "block";
                      } else {
                        newCategoryContainer.style.display = "none";
                      }
                    });
                  </script>
                  <label for="product_category">Product Category</label>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-floating my-3">
                  <input
                    type="text"
                    class="form-control"
                    id="product_name"
                    placeholder="Product name"
                    name="pname"
                    required
                  />
                  <label for="product_name">Product name</label>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-floating my-3">
                  <input
                    type="text"
                    class="form-control"
                    id="product_description"
                    placeholder="Product description"
                    name="desc"
                    required
                  />
                  <label for="product_description">Product description</label>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-floating my-3">
                  <input
                    type="text"
                    class="form-control"
                    id="product_price"
                    placeholder="Product price"
                    name="price"
                    required
                  />
                  <label for="product_price">Product price</label>
                </div>
              </div>
              <div class="profilimage">
                <img src="" alt="" /> <br />
                <input
                  type="file"
                  multiple
                  value="Enter image"
                  name="productpic"
                  required
                />
              </div>
              <div class="col-md-12">
                <div class="my-3">
                  <button class="btn btn-primary" type="submit">
                    Upload product
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</main>
{% endblock %}
